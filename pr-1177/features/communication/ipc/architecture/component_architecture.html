
<!DOCTYPE html>


<html lang="en" data-content_root="../../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Component Architecture &#8212; S-CORE 0.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/css/score.css?v=940e959b" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/css/score_needs.css?v=e97392eb" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/css/score_design.css?v=7199c97b" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/common_css/need_toggle.css?v=5c6620df" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/common_css/need_style.css?v=92936fa5" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/common_css/need_core.css?v=f5b60a78" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/common_css/need_links.css?v=2150a916" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/common_css/needstable.css?v=5e1b6797" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/modern.css?v=803738c0" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../../../_static/documentation_options.js?v=2709fde1"></script>
    <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../../../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
    <script src="../../../../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
    <script src="../../../../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
    <script src="../../../../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
    <script src="../../../../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=dca66431"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'features/communication/ipc/architecture/component_architecture';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://eclipse-score.github.io/score/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '0.1';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Requirements" href="../requirements/index.html" />
    <link rel="prev" title="Feature Architecture" href="feature_architecture.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Eclipse S-CORE</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../introduction/index.html">
    Introduction
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../requirements/index.html">
    Requirements
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../../index.html">
    Features
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../contribute/index.html">
    Contribute
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../score_releases/index.html">
    Releases
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../../../process/index.html">
    Process
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../../../platform_management_plan/index.html">
    PMP
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://projects.eclipse.org/projects/automotive.score">
    Eclipse
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/eclipse-score" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../introduction/index.html">
    Introduction
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../requirements/index.html">
    Requirements
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../../index.html">
    Features
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../contribute/index.html">
    Contribute
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../score_releases/index.html">
    Releases
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../process/index.html">
    Process
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../platform_management_plan/index.html">
    PMP
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://projects.eclipse.org/projects/automotive.score">
    Eclipse
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/eclipse-score" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../analysis-infra/index.html">Analysis Infrastructure</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../../index.html">Communication</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active has-children"><a class="reference internal" href="../index.html">Inter-process Communication</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l3 current active has-children"><a class="reference internal" href="index.html">Architecture</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="feature_architecture.html">Feature Architecture</a></li>
<li class="toctree-l4 current active"><a class="current reference internal" href="#">Component Architecture</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="../requirements/index.html">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../safety_planning/index.html">Safety Planning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roadmap.html">Roadmap</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../../frameworks/index.html">Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../infrastructure/index.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../integration/index.html">Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../persistency/index.html">Persistency</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../../index.html" class="nav-link">Features</a></li>
    
    
    <li class="breadcrumb-item"><a href="../../index.html" class="nav-link">Communication</a></li>
    
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Inter-process Communication</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Architecture</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Component Architecture</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="component-architecture">
<h1>Component Architecture<a class="headerlink" href="#component-architecture" title="Link to this heading">#</a></h1>
<section id="technical-concept-description">
<h2>Technical Concept Description<a class="headerlink" href="#technical-concept-description" title="Link to this heading">#</a></h2>
<p>As discussed in <a class="reference internal" href="../index.html#ipc-feature"><span class="std std-ref">Inter-process Communication</span></a>, the overall architecture of the communication framework must be layered.
This is required, to separate the frontend from the underlying communication mechanisms (also called bindings).</p>
<p>This ensures a stable public API, independent of the underlying binding(s).
At the same time, the communication framework can support many different communication protocols in a flexible manner.</p>
<img alt="Layered architecture with binding-agnostic mw::com and bindings beneath" src="../../../../_images/lola_layers.drawio.svg" />
<p>In the following sections we will look on the different architectural elements of the communication framework in more
detail.</p>
<section id="frontend">
<h3>Frontend<a class="headerlink" href="#frontend" title="Link to this heading">#</a></h3>
<p>The frontend is responsible of providing a stable public API to the user.
In general, the communication framework (<cite>mw::com</cite>) follows the client-server, pub-sub and producer-consumer patterns.</p>
<p>Following these patterns, the user interacts with different APIs depending on whether he is producer/server or
consumer/client.</p>
<p>A producer creates a <cite>Skeleton</cite> to provide events to consumers.
Each consumer creates a <cite>Proxy</cite> to connect to a producer.
Consumers can find available producers through a service discovery mechanism.
This mechanism is tightly bound to the <cite>Proxy</cite>, to only discover producers offering a compatible implementation of a
<cite>Skeleton</cite>.</p>
<div class="need_container docutils container" id="SNCB-c5aa311a">
<div class="pst-scrollable-table-container"><table class="need needs_grid_complex needs_layout_score needs_style_none needs_type_document table" id="doc__communication__proxy_skeleton">
<tbody>
<tr class="head row-odd"><td class="head_left" colspan="2"><div class="needs_head_left line-block">
<div class="line"><span><span class="needs_title"><span class="needs_data">Communication through mw::com</span></span></span></div>
</div>
</td>
<td class="head_center" colspan="2"><div class="needs_head line-block">
<div class="line"><span><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">valid</span></span></span></div>
<div class="line"><span></span></div>
<div class="line"><span><span class="needs_safety"><span class="needs_label">safety: </span><span class="needs_data">ASIL_B</span></span></span></div>
</div>
</td>
<td class="head_right" colspan="2"><div class="needs_head_right line-block">
<div class="line"><span><span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span></span></div>
</div>
</td>
</tr>
<tr class="meta row-even"><td class="meta" colspan="3"><div class="needs_meta_left line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">valid</span></span></div>
<div class="line"><span class="needs_tags"><span class="needs_label">tags: </span><span class="needs_data_container"><span class="needs_data">ipc</span></span></span></div>
<div class="line"><span class="needs_safety"><span class="needs_label">safety: </span><span class="needs_data">ASIL_B</span></span></div>
</span></span></div>
<div class="line"><span></span></div>
</div>
</td>
<td class="meta" colspan="3"></td>
</tr>
<tr class="content row-odd"><td class="content" colspan="6"><p class="plantuml" id="needarch-features/communication/ipc/architecture/component_architecture-0">
<object data="../../../../_images/plantuml-d03cb40521997535fb67ae3f51ecc1b7e87d7c84.svg" type="image/svg+xml" style="width:327px;height:278px;background:#FFFFFF;"></object></p>
</td>
</tr>
<tr class="footer row-even"><td class="footer_left" colspan="2"><div class="needs_footer_left line-block">
<div class="line"><span><span class="needs-id"><a class="reference internal" href="#doc__communication__proxy_skeleton" title="doc__communication__proxy_skeleton">doc__communication__proxy_skeleton</a></span></span></div>
</div>
</td>
<td class="footer" colspan="2"><div class="needs_footer line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Generic Document</span></span></span></div>
</div>
</td>
<td class="footer_right" colspan="2"></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Additional to these elements, a runtime singleton is used for background tasks to reduce resource consumption.
This runtime is invisible to the user.
This runtime is responsible for service discovery (explained in <a class="reference internal" href="#service-discovery"><span class="std std-ref">Service Discovery</span></a>), notification reception and
other infrastructure tasks.</p>
<p>Compatibility of <cite>Skeleton</cite> and <cite>Proxy</cite> is currently defined by them sharing the same communication interface.
Additionally, versioning will be taken into account in the future (see <a class="reference internal" href="../roadmap.html#roadmap"><span class="std std-ref">Roadmap</span></a>).</p>
<p>The communication interface for now consists of events. Support for methods and signals will be added in the future
(see <a class="reference internal" href="../roadmap.html#roadmap"><span class="std std-ref">Roadmap</span></a>).</p>
<p>Since S-CORE supports strongly typed programming languages, the API of <cite>Skeleton</cite> and <cite>Proxy</cite> is also strongly typed.
Instead of a code generator, we utilize features like templates in C++ and macros in Rust to “generate” the necessary
code at compile time.</p>
<p>But there are some “niche” use cases, where the need to “regenerate” and recompile the <cite>Proxy</cite> can be detrimental.
This is the case when:</p>
<ul class="simple">
<li><p>signatures are trivial and changes/differences between them are minimal</p></li>
<li><p>the communicated data/payload gets handled very generically (loosely typed) anyhow</p></li>
<li><p>the communicated data/payload has to get deep-inspected based on additional/separate type-information anyhow</p></li>
</ul>
<p>For these cases mw::com provides a <cite>GenericProxy</cite> that allows introspection of communication interfaces at runtime.</p>
<p>While the frontend is based on a communication model, it is independent from any communication protocol.
Therefore, it always forwards user requests to the binding(s) underneath.
Which bindings to use is defined in a configuration file.</p>
<p>A multi-binding approach is chosen, where API calls are mapped to a set of selected bindings.
Currently, the available bindings are:</p>
<ul class="simple">
<li><p>IPC (LoLa)</p></li>
<li><p>mock binding</p></li>
</ul>
</section>
<section id="bindings">
<h3>Bindings<a class="headerlink" href="#bindings" title="Link to this heading">#</a></h3>
<p>The need for bindings was discussed in <a class="reference internal" href="../index.html#multi-binding-support"><span class="std std-ref">Multi-binding support</span></a>.
Bindings reside beneath the frontend layer and accept the forwarded requests.</p>
<section id="ipc-binding">
<h4>IPC Binding<a class="headerlink" href="#ipc-binding" title="Link to this heading">#</a></h4>
<p>The basic idea of the ipc binding concept is to use two main operating system facilities:</p>
<ol class="arabic simple">
<li><p>Shared Memory: Shall be used for the heavy lifting of data exchange</p></li>
<li><p>Message Passing: Shall be used as notification mechanism</p></li>
</ol>
<p>We decided for this side channel since implementing a notification system via shared memory would include the usage of
condition variables.
These condition variables would require a mutex.
This could lead to the situation that a malicious process could lock the mutex forever and thus destroy any event
notification.
In general we can say that any kind of notification shall be exchanged via message passing facilities.
The section <a class="reference internal" href="#message-passing-facilities"><span class="std std-ref">Message Passing Facilities</span></a> below will go into more detail.</p>
<p>The usage of shared memory has some implications.
First, any synchronization regarding thread-safety / process-safety needs to be performed by the user.
Second, the memory that is shared between the processes is directly mapped into their virtual address space.
This implies that it is easy for a misbehaving process to destroy or manipulate any data within this memory segment.
In order to cope with the latter, we split up the shared memory into three segments.</p>
<ul class="simple">
<li><p>First, a segment where only the to-be-exchanged data is provided.
This segment shall be read-only to consumers and writeable by the producer.
This will ensure that nobody besides the producer process can manipulate the provided data.</p></li>
<li><p>The second and third segment shall contain necessary control information for the data segment.
Necessary control information can include atomics that are used to synchronize the access to the data segments.
Since this kind of access requires write access, we split the shared memory segments for control data by ASIL Level.
This way it can be ensured that no low-level ASIL process interferes with higher level ones.
More information on shared memory handling can be found in <a class="reference internal" href="#shared-memory-handling"><span class="std std-ref">Shared Memory Handling</span></a>.</p></li>
</ul>
<img alt="Mixed criticality setup for zero-copy IPC" src="../../../../_images/lola_mixed_crit_1_n.drawio.svg" />
<p>One of the main ideas in this concept is the split of control data from sample (user) data.
In order to ensure a mapping, the shared memory segments are divided into slots.
By convention, we then define that the slot indexes correlate.
Meaning, slot 0 in the control data is used to synchronize slot 0 in the sample data.
More information on these slot and the underlying algorithm can be found in <a class="reference internal" href="#synchronization-algorithm"><span class="std std-ref">Synchronization Algorithm</span></a>.</p>
<img alt="Relation of control data and sample data" src="../../../../_images/lola_slots.drawio.svg" />
<section id="message-passing-facilities">
<span id="id1"></span><h5>Message Passing Facilities<a class="headerlink" href="#message-passing-facilities" title="Link to this heading">#</a></h5>
<p>The Message Passing facilities, will not be used to synchronize the access to the shared memory segments.
This is done over the control segments.
We utilize message passing for notifications only.
These notifications include:</p>
<ul class="simple">
<li><p>event notification</p></li>
<li><p>partial restart</p></li>
</ul>
<p>This is done, since there is no need to implement an additional notification handling via shared memory, which would
only be possible by using mutexes and condition variables.
The utilization of mutexes would make the implementation of a wait-free algorithms more difficult.</p>
<p>Instead, we use an OS feature for notification:</p>
<ul class="simple">
<li><p>QNX Message Passing (under QNX)</p></li>
<li><p>Unix Domain Sockets (under Linux)</p></li>
</ul>
<p>As illustrated in the graphic below a process should provide one message passing port to receive data for each supported
ASIL-Level.
In order to ensure that messages received from QM processes will not influence ASIL messages, each message passing port
shall use a custom thread to wait for new messages.
Further, it must be possible to register callbacks for mentioned messages.
These callbacks shall then be invoked in the context of the socket specific thread.
This way we can ensure that messages are received in a serialized manner.</p>
<img alt="Message Passing in LoLa" src="../../../../_images/lola_message_passing.drawio.svg" />
</section>
<section id="shared-memory-handling">
<span id="id2"></span><h5>Shared Memory Handling<a class="headerlink" href="#shared-memory-handling" title="Link to this heading">#</a></h5>
<p>POSIX based operating systems generally support two kinds of shared memory:</p>
<ul class="simple">
<li><p>file-backed</p></li>
<li><p>anonymous</p></li>
</ul>
<p>Former is represented by a file within the file-system, while the latter is not visible directly to other processes.
We decide for former, in order to utilize the filesystem for a simpler service discovery.
In order to avoid fault propagation over restarts of the system, any shared memory communication shall not be
persistent.
Processes will identify shared memory segments over their name.
The name will be commonly known by producers and consumers and deduced by additional parameters like for example service
id and instance id.
When it comes to the granularity of the data stored in the shared memory segments, multiple options can be considered.
We could have one triplet of shared memory segments per process or one triplet of shared memory segments per event
within a service instance.
Former would make the ASIL-Split of segments quite hard, while the latter would explode the number of necessary segments
within the system.
As trade-of we decided to have one triplet of shared memory segments per service instance.</p>
<p>It is possible to map shared memory segments to a fixed virtual address.
This is highly discouraged by POSIX and leads to undefined behaviour.
Thus, shared memory segments will be mapped to different virtual addresses.
In consequence no raw pointer can be stored within shared memory, since it will be invalid within another process.
Only offset pointer (fancy pointer, relative pointer) shall be stored within shared memory segments.</p>
<p>The usage of shared memory does not involve the operating system, after shared memory segments are setup.
Thus, the operating system can no longer ensure freedom from interference between processes that have access to these
shared memory regions.
In order to restrict access we use ACL support of the operating system.</p>
<p>In addition to the restricted permissions, we have to ensure that a corrupted shared memory region cannot influence
other process-local memory regions.
This can be ensured by performing Active Bounds Checking.
So the only way how data corruption could propagate throughout a shared memory region is if a pointer within a shared
memory region points out of it.
Thus, a write operation to such a pointer could forward memory corruption.
The basic idea to overcome such a scenario is, that we check that any pointer stays within the bounds of the shared
memory region.
Since anyhow only offset pointers can be stored in a shared memory region, this active bounds check can be performed
whenever a offset pointer is dereferenced.</p>
<p>The last possible impact can be on timing.
If another process for example wrongly locks a mutex within the shared memory region and another process would then wait
for this lock, we would end up in a deadlock.
While timing is explicitly not a safety requirement (see <a class="reference internal" href="../index.html#spec-mixed-criticality"><span class="std std-ref">Mixed-Criticality safety systems</span></a>), we still want to strive for
wait-free algorithms to avoid such situations.
Further, avoiding mutexes in our algorithms increases performance since it reduces kernel calls.</p>
</section>
<section id="synchronization-algorithm">
<span id="id3"></span><h5>Synchronization Algorithm<a class="headerlink" href="#synchronization-algorithm" title="Link to this heading">#</a></h5>
<p>A slot shall contain all necessary meta-information in order to synchronize data access.
This information most certainly needs to include a timestamp to indicate the order of produced data within the slots.
Additionally, a use count is needed, indicating if a slot is currently in use by one process.
The concrete data is implementation defined and must be covered by the detailed design.</p>
<p>The main idea of the algorithm is that a producer shall always be able to store one new data sample.
If he cannot find a respective slot, this indicates a contract violation, which indicates that a QM process misbehaved.
In such a case, a producer should exclude any QM consumer from the communication.</p>
<p>This whole idea builds up on the split of shared memory segments by ASIL levels.
This way we can ensure that an QM process will not degrade the ASIL Level for a communication path.
In another case, where we already have a QM producer, it is possible for an ASIL B consumer to consume the QM data.
In this scenario, there is no separate control data for ASIL B, and they instead interact on the control data
for ASIL QM.
This is because, the data is QM and it is impossible for the middleware to apply additional checks to
enhance the quality of data.
This can only be done on application layer level.
Hence, separating QM and ASIL consumers holds no benefit.</p>
</section>
<section id="service-discovery">
<span id="id4"></span><h5>Service Discovery<a class="headerlink" href="#service-discovery" title="Link to this heading">#</a></h5>
<p>The communication framework must be capable to discover available service offers at runtime.
The offered services are differentiated by:</p>
<ul class="simple">
<li><p>service id (a unique identifier per different service interface)</p></li>
<li><p>instance id (a unique identifier per different producer offering the same service interface)</p></li>
<li><p>criticality level</p></li>
<li><p>version (not yet supported, see <a class="reference internal" href="../roadmap.html#roadmap"><span class="std std-ref">Roadmap</span></a>)</p></li>
</ul>
<p>To reduce resource consumption we decide against using an approach with a service registry daemon.
Instead we choose to use operating system facilities to achieve a performant service discovery.</p>
<p>The key technology behind the service discovery is the inotify subsystem of POSIX compliant operating systems.
It allows resource efficient and performant tracking of changes in the filesystem.</p>
<p>Keeping track of available service instances is left to the operating system.
Producers notify the OS about new service offers by creating a flag file.
Consumers either crawl the filesystem for existing offers or attach an inotify watch to wait for upcoming offers.
Whenever a new file is created, the OS automatically checks for impacted inotify watches and notifies each watch with
an appropriate event.</p>
<p>Also complex search requests where a consumer wants to know about all service instances with the same service interface,
can be solved efficiently with the inotify subsystem.</p>
<p>Service discovery is currently fully explicit.
Implicit service discovery for consumers is on our <a class="reference internal" href="../roadmap.html#roadmap"><span class="std std-ref">Roadmap</span></a>.
The goal is to handle service discovery transparently wherever possible.</p>
</section>
<section id="partial-restart-capability">
<h5>Partial Restart Capability<a class="headerlink" href="#partial-restart-capability" title="Link to this heading">#</a></h5>
<p>Partial restart capability means, that one of several communication partners may crash at any point in time and will
still be able to start up again and rejoin the communication, without affecting the other communication partners.</p>
<section id="challenge-to-overcome">
<h6>Challenge to overcome<a class="headerlink" href="#challenge-to-overcome" title="Link to this heading">#</a></h6>
<p>There is a shared state held in shared memory (the control data), which is maintained by all communication partners
(provider and consumers).
Consumers annotate within this shared state, which data (events/fields) they are currently
consuming (and therefore blocking underlying slots from re-use by the producer).
The provider annotates within this shared state, which slots are currently blocked for data updates that can’t be
accessed by consumers.</p>
<p>When a communication partner crashes, it may leave slots blocked within the shared state.
When it restarts later, it has to reclaim/re-use or free exactly the same slots, it claimed in a previous run.
Not doing so, would lead to resource exhaustion, since the slots would remain blocked indefinitely for either the
producer or consumers.
This requires, that a restarting communication partner knows exactly, which changes it had done to the shared state
previously in order to roll them back again.</p>
</section>
<section id="recovery-mechanism">
<h6>Recovery mechanism<a class="headerlink" href="#recovery-mechanism" title="Link to this heading">#</a></h6>
<p>The mechanism to enable the cleanup/recovery of shared state by a restarting communication partner is based
on transaction logs:</p>
<p>Each consumer and the producer owns a corresponding transaction log, which resides in shared memory.
They annotate what change to the shared state they are going to do.
Creating a transaction log entry means:</p>
<ol class="arabic simple">
<li><p>Writing a transaction begin marker, which completely describes, which change the upcoming activity will do.</p></li>
<li><p>Executing the activity in question.</p></li>
<li><p>Writing a transaction end marker, which annotates, whether the activity in (2) was done or not.</p></li>
</ol>
<p>During the restart of a communication partner, he checks for existing transaction logs in shared memory, which it
created in an earlier run, so that it can roll them back.</p>
<p>Two scenarios are possible:</p>
<ul class="simple">
<li><p>All transaction log entries are complete (transaction end marker is written).
The communication partner can roll all transactions back and rejoin communication.</p></li>
<li><p>A transaction log entry is incomplete (transaction end marker is missing).
The communication partner is incapable of rolling back his actions fully.
Rejoining the communication would impact other communication partners.
The communication partner is barred from rejoining the communication.</p></li>
</ul>
<p>We reduce the likelihood of the second scenario, by using transactions only when unavoidable and by keeping them short.</p>
</section>
</section>
</section>
<section id="mock-binding">
<h4>Mock Binding<a class="headerlink" href="#mock-binding" title="Link to this heading">#</a></h4>
<p>To support users in their testing efforts, the communication framework must provide support for mocking and faking.
Since the public API of mw::com is highly templated, most testing frameworks would reach their limits.
So instead of making the public API directly mockable, we use the binding concept to provide a mock binding.
The mock binding utilizes the GMock framework.</p>
</section>
</section>
</section>
<section id="interfaces">
<h2>Interfaces<a class="headerlink" href="#interfaces" title="Link to this heading">#</a></h2>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="feature_architecture.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Feature Architecture</p>
      </div>
    </a>
    <a class="right-next"
       href="../requirements/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Requirements</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#technical-concept-description">Technical Concept Description</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#frontend">Frontend</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bindings">Bindings</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ipc-binding">IPC Binding</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#message-passing-facilities">Message Passing Facilities</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#shared-memory-handling">Shared Memory Handling</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#synchronization-algorithm">Synchronization Algorithm</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#service-discovery">Service Discovery</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#partial-restart-capability">Partial Restart Capability</a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#challenge-to-overcome">Challenge to overcome</a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#recovery-mechanism">Recovery mechanism</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#mock-binding">Mock Binding</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interfaces">Interfaces</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/eclipse-score/score/edit/main/docs/features/communication/ipc/architecture/component_architecture.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../_sources/features/communication/ipc/architecture/component_architecture.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>